---
gitlab_version: 7.6.1_omnibus.5.3.0.ci-1

# Passed to find -mitme +n when deleting GitLab backups
gitlab_days_old_backups: 10

# SSL configuration
gitlab_ssl_enabled: False
gitlab_redirect_http: False
gitlab_ssl_cert_path: /etc/pki/tls/certs
gitlab_ssl_key_path: /etc/pki/tls/private
gitlab_ssl_filename: "{{ ansible_fqdn }}"
gitlab_ssl_port: 443


# --- gitlab.yml configuration --- #
# gitlab_ssh_host: ssh.host_example.com
# gitlab_time_zone: UTC
# gitlab_email_from: "gitlab@{{ ansible_domain }}"
# gitlab_default_projects_limit: 10
# gitlab_default_can_create_group: True
# gitlab_username_changing_enabled: True
# gitlab_default_theme: 2
# gitlab_signup_enabled: False
# gitlab_signin_enabled: True
# gitlab_restricted_visibility_levels: nil
# gitlab_default_projects_features_issues: True
# gitlab_default_projects_features_merge_requests: True
# gitlab_default_projects_features_wiki: True
# gitlab_default_projects_features_snippets: False
# gitlab_default_projects_features_visibility_level: private
# gitlab_repository_downloads_path: tmp/repositories

## If gitlab_issues_tracker_redmin is set to True, make sure to define
## the remaining variables. Otherwise the template will fail.
# gitlab_issues_tracker_redmine: False
# gitlab_issues_tracker_redmine_title: Redmine
# gitlab_issues_tracker_redmine_project_url: "http://redmine.sample/projects/:issues_tracker_id"
# gitlab_issues_tracker_redmine_issues_url: "http://redmine.sample/issues/:id"
# gitlab_issues_tracker_redmine_new_issue_url: "http://redmine.sample/projects/:issues_tracker_id/issues/new"

## If gitlab_issues_tracker_jira is set to True, make sure to define
## the remaining variables. Otherwise the template will fail.
# gitlab_issues_tracker_jira: False
# gitlab_issues_tracker_jira_title: Atlassian Jira
# gitlab_issues_tracker_jira_project_url: "http://jira.sample/issues/?jql=project=:issues_tracker_id"
# gitlab_issues_tracker_jira_issues_url: "http://jira.sample/browse/:id"
# gitlab_issues_tracker_jira_new_issue_url: "http://jira.sample/secure/CreateIssue.jspa"

## If gitlab_gravatar_ssl_url is defined, gitlab_gravator_plain_url will be ignored.
# gitlab_gravatar_enabled: True
# gitlab_gravatar_plain_url: "http://www.gravatar.com/avatar/%{hash}?s=%{size}&d=identicon"
# gitlab_gravatar_ssl_url: "https://secure.gravatar.com/avatar/%{hash}?s=%{size}&d=identicon"
# gitlab_webhook_timeout: 10

## LDAP sign-in
# These settings are documented in more detail at
# https://gitlab.com/gitlab-org/omnibus-gitlab/blob/629def0a7a26e7c2326566f0758d4a27857b52a3/README.md#setting-up-ldap-sign-in

# gitlab_ldap_enabled: True
## Each item in gitlab_ldap_servers is inserted into gitlab.rb
## Make sure to define all variablse for each server or template will fail.
# gitlab_ldap_servers:
#   - name: gitlab_ldap_main
#     provider_id: main
#     label: 'LDAP'
#     host: '_your_ldap_server'
#     port: 636
#     uid: 'sAMAccountName'
#     method: 'ssl'
#     bind_dn: '_the_full_dn_of_the_user_you_will_bind_with'
#     password: '_the_password_of_the_bind_user'
#     active_directory: True
#     allow_username_or_email_login: False
#     base: ''
#     user_filter: ''

#   - name: gitlab_ldap_secondary
#     provider_id: secondary
#     label: 'LDAP2'
#     host: '_your_ldap_server'
#     port: 636
#     uid: 'sAMAccountName'
#     method: 'ssl'
#     bind_dn: '_the_full_dn_of_the_user_you_will_bind_with'
#     password: '_the_password_of_the_bind_user'
#     active_directory: True
#     allow_username_or_email_login: False
#     base: ''
#     user_filter: ''

## Omniauth
## see https://gitlab.com/gitlab-org/omnibus-gitlab/blob/629def0a7a26e7c2326566f0758d4a27857b52a3/README.md#omniauth-google-twitter-github-login
# gitlab_omniauth_enabled: False
# gitlab_omniauth_allow_single_sign_on: False
# gitlab_omniauth_block_auto_created_users: True
## Specify multiple providers if desired. All four variables are required for
## each provider.
# gitlab_omniauth_providers:
#   - name: google_oauth2
#     app_id: "YOUR APP ID"
#     app_secret: "YOUR APP SECRET"
#     args: '"access_type" => "offline", "approval_prompt" => ""'

## Backups
## see https://gitlab.com/gitlab-org/omnibus-gitlab/blob/629def0a7a26e7c2326566f0758d4a27857b52a3/README.md#backups
# gitlab_backup_path: "/var/opt/gitlab/backups"
# gitlab_backup_keep_time: 604800
# gitlab_backup_upload_connection:
#   provider: AWS
#   region: eu-west-1
#   aws_access_key_id: 'AKIAKIAKI'
#   aws_secret_access_key: 'secret123'
# gitlab_backup_upload_remote_directory: my.s3.bucket

## Data storing directory
## see https://gitlab.com/gitlab-org/onibus-gitlab/blob/629def0a7a26e7c2326566f0758d4a27857b52a3/README.md#storing-git-data-in-an-alternative-directory
## If you want to use a single non-default directory to store git data use:
# gitlab_git_data_dir: /var/opt/gitlab/git-data

## GitLab Shell settings for GitLab

## Extra customization
gitlab_extra_google_analytics_id: '_your_tracking_id'
gitlab_extra_piwik_url: '_your_piwik_url'
gitlab_extra_piwik_id: '_your_piwik_site_id'
gitlab_extra_sign_in_text:
  company_name: CompanyName
  company_url: http://www.companydomain.com/
  company_logo_url: http://www.companydomain.com/logo.png

gitlab_env:
  bundle_gemfile: "/opt/gitlab/embedded/service/gitlab-rails/Gemfile"
  path: "/opt/gitlab/bin:/opt/gitlab/embedded/bin:/bin:/usr/bin"


# --- GitLab Application Settings --- #
gitlab_upload_directory: /var/opt/gitlab/gitlab-rails/uploads
gitlab_rate_limit_requests_per_period: 10
gitlab_rate_limit_period: 60
gitlab_root_password: ''


# --- GitLab Database Settings --- #
## see https://gitlab.com/gitlab-org/omnibus-gitlab/blob/629def0a7a26e7c2326566f0758d4a27857b52a3/doc/settings/database.md#database-settings
## Only needed if you use an external database.
gitlab_db_adapter: "postgresql"
gitlab_db_encoding: "unicode"
gitlab_db_database: "gitlabhq_production"
gitlab_db_pool: 10
gitlab_db_username: "gitlab"
gitlab_db_password: nil
gitlab_db_host: nil
gitlab_db_port: 5432
gitlab_db_socket: nil


# --- GitLab Redis Settigs --- #
## see https://gitlab.com/gitlab-org/omnibus-gitlab/blob/629def0a7a26e7c2326566f0758d4a27857b52a3/doc/settings/redis.md#redis-settings
# Connect to your own redis instance.
gitlab_redis_host: 127.0.0.1
gitlab_redis_port: nil
gitlab_redis_socket: /var/opt/gitlab/redis/redis.socket


# --- GitLab email server settings --- #
## see https://gitlab.com/gitlab-org/omnibus-gitlab/tree/629def0a7a26e7c2326566f0758d4a27857b52a3/README.md#changing-the-name-of-the-git-user-group
## Modify default git user.


# --- GitLab user --- #
gitlab_user_username: git
gitlab_user_group: git
gitlab_user_uid: nil
gitlab_user_gid: nil
# The shell for the git user
gitlab_user_shell: "/bin/sh"
# The home directory for the git user
gitlab_user_home: "/var/opt/gitlab"
gitlab_user_git_user_name: "GitLab"
gitlab_user_git_user_email: "gitlab@#{node['fqdn']}"



# --- GitLab Unicorn --- #
gitlab_unicorn_worker_timeout: 60
gitlab_unicorn_worker_processes: 2

# Advanced settings
gitlab_unicorn_listen: '127.0.0.1'
gitlab_unicorn_port: 8080
gitlab_unicorn_socket: '/var/opt/gitlab/gitlab-rails/sockets/gitlab.socket'
gitlab_unicorn_pidfile: '/opt/gitlab/var/unicorn/unicorn.pid'
gitlab_unicorn_tcp_nopush: true
gitlab_unicorn_backlog_socket: 1024
# We do not recommend changing this setting
gitlab_unicorn_log_directory: "/var/log/gitlab/unicorn"



# --- GitLab Sidekiq --- #
gitlab_sidekiq_log_directory: "/var/log/gitlab/sidekiq"
gitlab_sidekiq_shutdown_timeout: 4



# --- GitLab Shell --- #
gitlab_shell_audit_usernames: false
gitlab_shell_log_level: 'INFO'
gitlab_shell_http_settings: { user: 'username', password: 'password', ca_file: '/etc/ssl/cert.pem', ca_path: '/etc/pki/tls/certs', self_signed_cert: false}
gitlab_shell_log_directory: "/var/log/gitlab/gitlab-shell/"





# GitLab CI Configuration
gitlab_ci_enabled: False
gitlab_ci_fqdn: ci.{{ ansible_domain }}
gitlab_ci_ssl_filename: "{{ gitlab_ci_fqdn }}"

# These are examples of storing a block varible in YAML using the "|" character
# to indicate a literal style, preserving line breaks.
# The private key should be stored in an Ansible vault.
#
# See http://yaml.org/spec/current.html#id2503232 for more information.
#
# gitlab_ssl_crt: |
#   -----BEGIN CERTIFICATE-----
#   # public cert goes here
#   -----END CERTIFICATE-----

# gitlab_ssl_key: |
#   -----BEGIN RSA PRIVATE KEY-----
#   # private cert goes here
#   -----END RSA PRIVATE KEY-----
#
# gitlab_ci_ssl_crt: |
#   -----BEGIN CERTIFICATE-----
#   # public cert goes here
#   -----END CERTIFICATE-----

# gitlab_ci_ssl_key: |
#   -----BEGIN RSA PRIVATE KEY-----
#   # private cert goes here
#   -----END RSA PRIVATE KEY-----